<div *ngIf="showToast" class="toast-container" [ngClass]="{'toast-success': toastSuccess, 'toast-error': !toastSuccess}">
  {{ toastMessage }}
</div>

<div class="containera">
  <div class="container">
    <div class="registro">
      <h1 class="auth-title">REGÍSTRATE</h1>

      <div class="form" [formGroup]="formSignup">
        <div class="form-column">
          <label for="name">Nombre</label>
          <input type="text" formControlName="name" class="form-control" id="name" placeholder="Nombre"
                 [ngClass]="{'input-error': formSignup.get('name')?.touched && formSignup.get('name')?.invalid}">
          <span class="error-msg">
            <span *ngIf="formSignup.get('name')?.touched && formSignup.get('name')?.hasError('required')">
              Name is required
            </span>
          </span>

          <label for="email">Email</label>
          <input type="email" formControlName="email" class="form-control" id="email" placeholder="Correo electrónico"
                 required
                 [ngClass]="{'input-error': formSignup.get('email')?.touched && formSignup.get('email')?.invalid}">
          <span class="error-msg">
            <span *ngIf="formSignup.get('email')?.touched && formSignup.get('email')?.hasError('required')">
              Email is required
            </span>
            <span *ngIf="formSignup.get('email')?.touched && formSignup.get('email')?.hasError('email')">
              Email format is invalid
            </span>
            <span *ngIf="formSignup.get('email')?.hasError('emailInUse')">
  Este correo ya está registrado
</span>

          </span>

          <label for="password">Contraseña</label>
          <input type="password" formControlName="password" class="form-control" id="password" placeholder="Contraseña"
                 required
                 [ngClass]="{'input-error': formSignup.get('password')?.touched && formSignup.get('password')?.invalid}">
          <span class="error-msg">
            <span *ngIf="formSignup.get('password')?.touched && formSignup.get('password')?.hasError('required')">
              Password is required
            </span>
          </span>
        </div>

        <div class="form-column">
          <label for="secondName">Apellidos</label>
          <input type="text" formControlName="secondName" class="form-control" id="secondName" placeholder="Apellidos"
                 required
                 [ngClass]="{'input-error': formSignup.get('secondName')?.touched && formSignup.get('secondName')?.invalid}">
          <span class="error-msg">
            <span *ngIf="formSignup.get('secondName')?.touched && formSignup.get('secondName')?.hasError('required')">
              Second name is required
            </span>
          </span>

          <label for="number">Número de teléfono</label>
          <input type="tel" formControlName="number" class="form-control" id="number" placeholder="Número de teléfono"
                 required
                 [ngClass]="{'input-error': formSignup.get('number')?.touched && formSignup.get('number')?.invalid}">
          <span class="error-msg">
            <span *ngIf="formSignup.get('number')?.touched && formSignup.get('number')?.hasError('required')">
              Phone number is required
            </span>
            <span
              *ngIf="formSignup.get('number')?.touched && (formSignup.get('number')?.hasError('minlength') || formSignup.get('number')?.hasError('maxlength'))">
              Phone number must be 9 digits
            </span>
            <span *ngIf="formSignup.get('number')?.touched && formSignup.get('number')?.hasError('pattern')">
  Only 9 digits are allowed
</span>

          </span>

          <label for="passwordConfirmation">Confirmar contraseña</label>
          <input type="password" formControlName="passwordConfirmation" class="form-control" id="passwordConfirmation"
                 placeholder="Confirmar contraseña" required
                 [ngClass]="{'input-error': formSignup.get('passwordConfirmation')?.touched && formSignup.get('passwordConfirmation')?.invalid}">
          <span class="error-msg">
            <span
              *ngIf="formSignup.get('passwordConfirmation')?.touched && formSignup.get('passwordConfirmation')?.hasError('required')">
              Password confirmation is required
            </span>
          </span>
        </div>
      </div>

      <p class="auth-register-text">
        ¿Ya tienes una cuenta?
        <a routerLink="/login">Iniciar sesión</a>
      </p>

      <div class="conditions">
        <label>
          <input type="checkbox" [(ngModel)]="termsAccepted">
          Acepto las <a href="#" (click)="openTerms(); $event.preventDefault()">condiciones de uso</a>
        </label>
        <br>
        <label>
          <input type="checkbox" [(ngModel)]="privacyAccepted">
          Acepto la <a href="#" (click)="openPrivacy(); $event.preventDefault()">política de privacidad</a>
        </label>
      </div>



      <input type="submit" value="Registrarse" class="submit-btn" (click)="onSubmit()">
    </div>
  </div>


  <div class="popup" *ngIf="showTermsModal || showPrivacyModal" (click)="closeModal()">
    <div class="popup-body" (click)="$event.stopPropagation()">
      <div class="popup-info">
        <div class="header">
          <h2 *ngIf="showTermsModal">Condiciones de uso</h2>
          <h2 *ngIf="showPrivacyModal">Política de privacidad</h2>

          <div *ngIf="showTermsModal">
            <p>
              Estas Condiciones de Uso regulan el acceso y uso del sitio web <strong>Wok My Noodles</strong> y los
              servicios ofrecidos a través del mismo. Al registrarte o utilizar cualquier funcionalidad, aceptas estar
              sujeto a estos términos.
              <br><br><strong>Última actualización: 11/2/2025</strong>
            </p>

            <h4>1. Registro de Usuario</h4>
            <p>Para realizar pedidos, es necesario crear una cuenta. Debes proporcionar información veraz y mantenerla
              actualizada.</p>

            <h4>2. Uso Permitido</h4>
            <p>El sitio debe utilizarse únicamente con fines personales y legales. Está prohibido el uso del sitio para
              actividades fraudulentas o maliciosas.</p>

            <h4>3. Propiedad Intelectual</h4>
            <p>Todo el contenido es propiedad de Wok My Noodles o sus licenciantes. No se permite su uso sin
              autorización.</p>

            <h4>4. Pedidos y Pagos</h4>
            <p>Todos los pedidos están sujetos a disponibilidad y los precios pueden cambiar. Nos reservamos el derecho
              de rechazar transacciones.</p>

            <h4>5. Responsabilidad</h4>
            <p>No nos responsabilizamos por daños indirectos o interrupciones del servicio.</p>

            <h4>6. Modificaciones</h4>
            <p>Estas condiciones pueden modificarse y serán efectivas al publicarse en esta sección.</p>

            <h4>7. Contacto</h4>
            <p>Para consultas: <strong>wokmynoodles&#64;gmail.com</strong></p>
          </div>

          <div *ngIf="showPrivacyModal">
            <p>
              En <strong>Wok My Noodles</strong>, nos comprometemos a proteger tu privacidad y garantizar la seguridad
              de tus datos personales. Esta Política describe cómo recopilamos, usamos y protegemos tu información.
              <br><br><strong>Última actualización: 11/2/2025</strong>
            </p>

            <h4>1. Información que Recopilamos</h4>
            <p>Recopilamos datos como nombre, dirección, correo, teléfono y otra información necesaria para tus
              pedidos.</p>

            <h4>2. Uso de la Información</h4>
            <ul>
              <li>Procesar tus pedidos.</li>
              <li>Mejorar tu experiencia en el sitio.</li>
              <li>Enviar promociones y actualizaciones.</li>
              <li>Ofrecer soporte al cliente.</li>
            </ul>

            <h4>3. Protección de Datos</h4>
            <p>Usamos medidas de seguridad, aunque ninguna transmisión por Internet es 100% segura.</p>

            <h4>4. Uso de Cookies</h4>
            <p>Utilizamos cookies para personalizar la navegación. Puedes desactivarlas desde tu navegador.</p>

            <h4>5. Compartir Información</h4>
            <p>No vendemos tus datos. Solo se comparten con servicios necesarios como pagos o envíos.</p>

            <h4>6. Derechos del Usuario</h4>
            <p>Puedes acceder, corregir o eliminar tus datos escribiendo a <strong>wokmynoodles&#64;gmail.com</strong>.
            </p>

            <h4>7. Cambios en la Política</h4>
            <p>Podemos modificar esta política. Las actualizaciones estarán disponibles aquí.</p>
          </div>

        </div>
      </div>
    </div>
  </div>


</div>
